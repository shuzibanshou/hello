{"version":3,"file":"js/873.dd70cd61.js","mappings":"0JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,aAAaL,EAAIM,UAAWN,EAAIO,KAAML,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQL,EAAIQ,SAAS,cAAc,KAAK,CAACN,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,gBAAgB,CAACO,MAAM,CAACC,MAAOV,EAAIQ,SAASG,UAAWC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,SAAU,YAAaK,EAAI,EAAEE,WAAW,uBAAuBf,EAAIgB,GAAIhB,EAAIiB,SAASC,UAAU,SAASC,EAAKC,GAAO,OAAOlB,EAAG,WAAW,CAACmB,IAAID,EAAMf,MAAM,CAAC,MAAQc,EAAKG,UAAUC,SAAS,CAAC,OAAS,SAASC,GAAQ,OAAOxB,EAAIyB,YAAY,IAAI,CAACzB,EAAI0B,GAAG1B,EAAI2B,GAAGR,EAAKS,SAAS,IAAG,IAAI,GAAG1B,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,gBAAgB,CAACO,MAAM,CAACC,MAAOV,EAAIQ,SAASqB,UAAWjB,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,SAAU,YAAaK,EAAI,EAAEE,WAAW,uBAAuBf,EAAIgB,GAAIhB,EAAIiB,SAASa,QAAQ,SAASX,EAAKC,GAAO,OAAOlB,EAAG,WAAW,CAACmB,IAAID,EAAMhB,YAAY,KAAKC,MAAM,CAAC,MAAQc,EAAKY,OAAOR,SAAS,CAAC,OAAS,SAASC,GAAQ,OAAOxB,EAAIyB,YAAY,IAAI,CAACzB,EAAI0B,GAAG1B,EAAI2B,GAAGR,EAAKS,SAAS,IAAG,IAAI,IAAI,IAAI,GAAG5B,EAAIgC,KAAK9B,EAAG,MAAM,CAACE,YAAY,SAASJ,EAAIgB,GAAIhB,EAAIiC,OAAO,SAASd,EAAKC,GAAO,OAAOlB,EAAG,MAAM,CAACmB,IAAID,EAAMhB,YAAY,aAAa8B,OAASd,EAAO,GAAK,GAAK,EAAM,kBAAoB,IAAK,CAAClB,EAAG,MAAM,CAACE,YAAY,WAAW+B,GAAG,CAAC,MAAQ,SAASX,GAAQ,OAAOxB,EAAIoC,SAASjB,EAAKkB,IAAI,IAAI,CAACnC,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMiC,EAAQ,KAAgC,IAAM,IAAIH,GAAG,CAAC,KAAO,SAASX,GAAQ,OAAOxB,EAAIuC,QAAQpB,EAAKK,EAAO,KAAKtB,EAAG,MAAM,CAACE,YAAY,OAAOC,MAAM,CAAC,IAAMiC,EAAQ,MAA0B,IAAM,MAAMpC,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACJ,EAAI0B,GAAG1B,EAAI2B,GAAGR,EAAKqB,aAAatC,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACJ,EAAI0B,GAAG1B,EAAI2B,GAAGR,EAAKsB,eAAevC,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACJ,EAAI0B,GAAG1B,EAAI2B,GAAGR,EAAKuB,eAAexC,EAAG,MAAM,CAACE,YAAY,YAAY,CAAqB,IAAnBe,EAAKwB,UAAiBzC,EAAG,OAAO,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,KAAK,aAAa,WAAWL,EAAI0B,GAAG,IAAI1B,EAAI2B,GAAGR,EAAKyB,UAAU,WAAW,GAAG5C,EAAIgC,KAAyB,IAAnBb,EAAKwB,UAAiBzC,EAAG,OAAO,CAACE,YAAY,YAAY,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,KAAK,aAAa,cAAcL,EAAI0B,GAAG,IAAI1B,EAAI2B,GAAGR,EAAKyB,UAAU,QAAQ,GAAG5C,EAAIgC,SAAS9B,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,OAAO,CAACF,EAAI0B,GAAG1B,EAAI2B,GAAG3B,EAAI6C,GAAG,iBAAP7C,CAAyBmB,EAAK2B,iBAAiB5C,EAAG,OAAO,CAACE,YAAY,aAAa,CAACJ,EAAI0B,GAAG1B,EAAI2B,GAAG3B,EAAI6C,GAAG,iBAAP7C,CAAyBmB,EAAK4B,uBAA4C,GAApB5B,EAAK6B,YAAkB9C,EAAG,MAAM,CAACE,YAAY,wBAAwB+B,GAAG,CAAC,MAAQ,SAASX,GAAQ,OAAOxB,EAAIiD,cAAc,CAAC,IAAM9B,EAAKkB,IAAI,OAAS,EAAE,IAAMlB,EAAK+B,IAAI,YAAc/B,EAAKgC,YAAY,UAAYhC,EAAKwB,WAAW,IAAI,CAAC3C,EAAI0B,GAAG,YAAYxB,EAAG,MAAM,CAACE,YAAY,UAAUgD,MAAM,CAACC,cAAcrD,EAAIsD,eAAenC,EAAKkB,MAAMF,GAAG,CAAC,MAAQ,SAASX,GAAiC,OAAzBA,EAAO+B,kBAAyBvD,EAAIwD,UAAUrC,EAAKK,EAAO,IAAI,CAAExB,EAAIsD,eAAenC,EAAKkB,KAAMnC,EAAG,OAAO,CAACuD,YAAY,CAAC,MAAQ,SAAS,CAACzD,EAAI0B,GAAG,YAAYxB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,KAAK,aAAa,WAAW,GAAGH,EAAG,aAAa,CAACiC,GAAG,CAAC,eAAenC,EAAI0D,YAAY,MAAQ1D,EAAI2D,MAAM,cAAc3D,EAAI4D,aAAa,CAAC1D,EAAG,MAAM,CAAC2D,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASrD,MAAOV,EAAIgE,YAAajD,WAAW,gBAAgBX,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,IAAI,IAAG,GAAIJ,EAAIiE,WAAY/D,EAAG,OAAO,CAACG,MAAM,CAAC,IAAM,KAAK,CAACH,EAAG,OAAO,CAACE,YAAY,sBAAsBC,MAAM,CAAC,KAAO,cAAc,KAAO,QAAQH,EAAG,MAAM,CAACF,EAAI0B,GAAG,cAAc,GAAG1B,EAAIgC,MAAM,EACv/G,EACIkC,EAAkB,G,8BCgFtB,GACAJ,KAAAA,OACAK,OACA,OACA5D,KAAAA,EACAD,OAAAA,GACAW,SAAAA,CACAC,SAAAA,CACA,0EACA,4EACA,oGACAY,OAAAA,CAAAA,CAAA,qEACAsC,KAAAA,CAAAA,KAAAA,OAEA5D,SAAAA,CACAG,UAAAA,GACAkB,UAAAA,GACAwC,MAAAA,IAEAL,aAAAA,EACAM,cAAAA,KACArC,MAAAA,GACAsC,KAAAA,EACAN,YAAAA,EACAO,UAAAA,GAEA,EACAC,eACA,8FACA,yCACA,aACA,kBACA,aAEA,eAGAC,OAAAA,iBAAAA,SAAAA,KAAAA,aACA,EACAC,UAAAA,WACAD,OAAAA,oBAAAA,SAAAA,KAAAA,aACA,EACAE,QAAAA,KACA,yCACAC,WACAA,EAAAA,EAAAA,IAAAA,CAAA,2BACA,yBAEA,gCAEA,wBACA,cACA,YAEA,EAEAzC,SAAAA,GACA,sBACA0B,KAAAA,aACAgB,OAAAA,CAAAC,GAAAA,IAEA,EAEAvB,UAAAA,EAAAA,GAKA,sBAEA,kCACA,iCACA,MAEA,mCACA,oBAEA,uCACA,iCAEA,iCAEA,EAEAF,eAAAA,GACA,wCACA,wBACA,gBAKA,EAGA0B,eACA,oEACA,wCACA,wCACA,aACA,mBAEA,EAEAC,eACA,SACA,eACA,8BACA,2BACA,0BACA,wBAEA,oBACAC,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACA,mCACA,UACA,qBAEA,EAEAzD,aACA,YACA,SACA,eACA,8BACA,2BACA,0BACA,yBAEAyD,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,IACA,0BACA,YAEA,EAEAC,SACAC,EAAAA,EAAAA,IAAAA,CAAAA,GAAAA,MAAAA,IACA,2BAEA,EAEA7C,QAAAA,EAAAA,GACA,sCAEApB,EAAAA,OAAAA,EAAAA,OAEA,kBACAkE,EAAAA,IAAAA,EAAAA,MACAA,EAAAA,OAAAA,WACAA,EAAAA,OAAAA,KACAlE,EAAAA,OAAAA,IAAAA,EAAAA,KAUA,CACA,CAEA,EAEAuC,YAAAA,GAEA,mDACA,+BACA,WAEA,6BACA,MAMA4B,EAAAA,MAAAA,QAAAA,GACAA,EAAAA,MAAAA,UAAAA,kBAAAA,UACA,wCACAC,EAAAA,MAAAA,UAAAA,gBAAAA,YACA,EAEA5B,MAAAA,EAAAA,GACA,mCACA2B,EAAAA,MAAAA,UAAAA,uBACA,wCACAC,EAAAA,MAAAA,UAAAA,uBACAD,EAAAA,iBAAAA,gBAAAA,EACA,EACA1B,WAAAA,GACA,oBACA0B,EAAAA,MAAAA,QAAAA,MACA,ICpR4R,I,UCQxRE,GAAY,OACd,EACAzF,EACAmE,GACA,EACA,KACA,WACA,MAIF,EAAesB,EAAiB,O,sHCjBzB,SAASX,EAAQC,GACtB,OAAOW,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eACLC,OAAQ,OACRb,UAEJ,CAGO,SAASI,EAAiBJ,GAC/B,OAAOW,EAAAA,EAAAA,GAAQ,CACbC,IAAK,mBACLC,OAAQ,OACRb,UAEJ,CAGO,SAASM,EAAaN,GAC3B,OAAOW,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eACLC,OAAQ,OACRb,UAEJ,C","sources":["webpack://the9art/./src/views/Home/index.vue","webpack://the9art/src/views/Home/index.vue","webpack://the9art/./src/views/Home/index.vue?a286","webpack://the9art/./src/views/Home/index.vue?3c0e","webpack://the9art/./src/api/home.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('Swiper',{attrs:{\"swiper-img\":_vm.swiper}}),(_vm.init)?_c('div',{staticClass:\"check\"},[_c('Form',{attrs:{\"model\":_vm.formItem,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"类型\"}},[_c('CheckboxGroup',{model:{value:(_vm.formItem.checkbox1),callback:function ($$v) {_vm.$set(_vm.formItem, \"checkbox1\", $$v)},expression:\"formItem.checkbox1\"}},_vm._l((_vm.filtrate.gameType),function(item,index){return _c('Checkbox',{key:index,attrs:{\"label\":item.genre_id},nativeOn:{\"change\":function($event){return _vm.filterGame()}}},[_vm._v(_vm._s(item.label))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"系统\"}},[_c('CheckboxGroup',{model:{value:(_vm.formItem.checkbox2),callback:function ($$v) {_vm.$set(_vm.formItem, \"checkbox2\", $$v)},expression:\"formItem.checkbox2\"}},_vm._l((_vm.filtrate.system),function(item,index){return _c('Checkbox',{key:index,staticClass:\"22\",attrs:{\"label\":item.os_id},nativeOn:{\"change\":function($event){return _vm.filterGame()}}},[_vm._v(_vm._s(item.label))])}),1)],1)],1)],1):_vm._e(),_c('div',{staticClass:\"goods\"},_vm._l((_vm.games),function(item,index){return _c('div',{key:index,staticClass:\"goods-item\",style:(((index +1) % 4 == 0)  ? 'margin-right: 0' : '')},[_c('div',{staticClass:\"item-img\",on:{\"click\":function($event){return _vm.goDetail(item.gid)}}},[_c('img',{attrs:{\"src\":require(\"@/assets/img/placeholder.png\"),\"alt\":\"\"},on:{\"load\":function($event){return _vm.loadImg(item,$event)}}}),_c('img',{staticClass:\"icon\",attrs:{\"src\":require(\"@/assets/img/Steam.png\"),\"alt\":\"\"}}),_c('div',{staticClass:\"goods-item-title overflow\"},[_vm._v(_vm._s(item.genres))])]),_c('div',{staticClass:\"goods-price\"},[_c('div',{staticClass:\"goods-name\"},[_c('div',{staticClass:\"goods-title\"},[_c('span',{staticClass:\"game_cname overflow\"},[_vm._v(_vm._s(item.game_cname))]),_c('span',{staticClass:\"game_ename overflow\"},[_vm._v(_vm._s(item.game_ename))]),_c('div',{staticClass:\"goodType\"},[(item.good_type === 1)?_c('span',[_c('svg-icon',{attrs:{\"size\":\"20\",\"icon-class\":\"cdkey\"}}),_vm._v(\" \"+_vm._s(item.district)+\"CDKEY \")],1):_vm._e(),(item.good_type === 2)?_c('span',{staticClass:\"activtiy\"},[_c('svg-icon',{attrs:{\"size\":\"20\",\"icon-class\":\"activtiy\"}}),_vm._v(\" \"+_vm._s(item.district)+\"礼物 \")],1):_vm._e()])]),_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"currencyFormat\")(item.price_final)))]),_c('span',{staticClass:\"old-price\"},[_vm._v(_vm._s(_vm._f(\"currencyFormat\")(item.price_initial)))])])]),(item.cdkey_store == 0)?_c('div',{staticClass:\"car-btn added_to_cart\",on:{\"click\":function($event){return _vm.arrivalNotify({'gid':item.gid,'rdm_id':1,'vid':item.vid,'district_id':item.district_id,'good_type':item.good_type})}}},[_vm._v(\" 到货提醒 \")]):_c('div',{staticClass:\"car-btn\",class:{added_to_cart:_vm.if_add_to_cart(item.gid)},on:{\"click\":function($event){$event.stopPropagation();return _vm.addToCart(item,$event)}}},[(_vm.if_add_to_cart(item.gid))?_c('span',{staticStyle:{\"width\":\"50px\"}},[_vm._v(\"已加入购物车\")]):_c('svg-icon',{attrs:{\"size\":\"32\",\"icon-class\":\"cart\"}})],1),_c('transition',{on:{\"before-enter\":_vm.beforeEnter,\"enter\":_vm.enter,\"after-enter\":_vm.afterEnter}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shopCarBall),expression:\"shopCarBall\"}],staticClass:\"shop_car_ball\"},[_c('div',{staticClass:\"linner_ball\"})])])],1)])}),0),(_vm.isSpinShow)?_c('Spin',{attrs:{\"fix\":\"\"}},[_c('Icon',{staticClass:\"demo-spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"18\"}}),_c('div',[_vm._v(\"Loading\")])],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <Swiper :swiper-img=\"swiper\" />\r\n    <div class=\"check\" v-if=\"init\">\r\n      <Form :model=\"formItem\" :label-width=\"80\" >\r\n        <FormItem label=\"类型\">\r\n          <CheckboxGroup v-model=\"formItem.checkbox1\">\r\n            <Checkbox v-for=\"(item, index) in filtrate.gameType\" :key=\"index\" :label=\"item.genre_id\" @change.native=\"filterGame()\">{{item.label}}</Checkbox>\r\n          </CheckboxGroup>\r\n        </FormItem>\r\n        <FormItem label=\"系统\">\r\n          <CheckboxGroup v-model=\"formItem.checkbox2\">\r\n            <Checkbox class=\"22\" v-for=\"(item, index) in filtrate.system\" :key=\"index\" :label=\"item.os_id\" @change.native=\"filterGame()\">{{item.label}}</Checkbox>\r\n          </CheckboxGroup>\r\n        </FormItem>\r\n        <!-- TODO 暂时不按热度和折扣对游戏排序 -->\r\n        <!-- <FormItem label=\"排序\">\r\n          <RadioGroup  v-model=\"formItem.radio\">\r\n            <Radio  v-for=\"(type, index) in filtrate.sort\" :key=\"index\" :label=\"type\" @change.native=\"filterGame()\"/>\r\n          </RadioGroup>\r\n        </FormItem> -->\r\n      </Form>\r\n    </div>\r\n    <div class=\"goods\">\r\n      <div class=\"goods-item\" v-for=\"(item,index) in games\" :style=\" ((index +1) % 4 == 0)  ? 'margin-right: 0' : ''\" :key=\"index\">\r\n        <div class=\"item-img\" @click=\"goDetail(item.gid)\">\r\n          <!-- <img :src=\"item.image\" alt=\"\" @load=\"showImg(index)\"> -->\r\n          <img src=\"@/assets/img/placeholder.png\" alt=\"\" @load=\"loadImg(item,$event)\">\r\n          <img class=\"icon\" src=\"@/assets/img/Steam.png\" alt=\"\">\r\n          <div class=\"goods-item-title overflow\">{{ item.genres }}</div>\r\n        </div>\r\n        <div class=\"goods-price\">\r\n          <div class=\"goods-name\">\r\n            <div class=\"goods-title\">\r\n              <span class=\"game_cname overflow\">{{ item.game_cname }}</span>\r\n              <span class=\"game_ename overflow\">{{ item.game_ename }}</span>\r\n              <div class=\"goodType\">\r\n                <span v-if=\"item.good_type === 1\">\r\n                  <svg-icon size=\"20\" icon-class=\"cdkey\" />\r\n                  {{ item.district }}CDKEY\r\n                </span>\r\n                <span class=\"activtiy\" v-if=\"item.good_type === 2\">\r\n                  <svg-icon size=\"20\" icon-class=\"activtiy\" />\r\n                  {{ item.district }}礼物\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div class=\"price\">\r\n              <span>{{ item.price_final | currencyFormat }}</span>\r\n              <span class=\"old-price\">{{ item.price_initial | currencyFormat }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"car-btn added_to_cart\" @click=\"arrivalNotify({'gid':item.gid,'rdm_id':1,'vid':item.vid,'district_id':item.district_id,'good_type':item.good_type})\" v-if=\"item.cdkey_store == 0\">\r\n            到货提醒\r\n          </div>\r\n          <div class=\"car-btn\" @click.stop=\"addToCart(item,$event)\" :class=\"{added_to_cart:if_add_to_cart(item.gid)}\" v-else>\r\n            <span v-if=\"if_add_to_cart(item.gid)\" style=\"width:50px;\">已加入购物车</span>\r\n            <svg-icon v-else size=\"32\" icon-class=\"cart\"/>\r\n          </div>\r\n          <!-- 添加购物车动画 -->\r\n          <transition @before-enter=\"beforeEnter\" @enter=\"enter\" @after-enter=\"afterEnter\">\r\n              <div class=\"shop_car_ball\" v-show=\"shopCarBall\">\r\n                  <div class=\"linner_ball\"></div>\r\n              </div>\r\n          </transition>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n    <!-- 加载更多遮罩动画 -->\r\n    <Spin fix v-if=\"isSpinShow\">\r\n        <Icon type=\"ios-loading\" size=18 class=\"demo-spin-icon-load\"></Icon>\r\n        <div>Loading</div>\r\n    </Spin>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getHome, indexGetMoreGame, getSlideData } from \"@/api/home.js\";\r\nimport { mapActions } from \"vuex\";\r\n\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  data() {\r\n    return {\r\n      init: 0, // 初始化完成前不显示html\r\n      swiper: [],\r\n      filtrate: {\r\n        gameType: [\r\n          { \"genre_id\": 23, \"label\": \"独立\" }, { \"genre_id\": 1, \"label\": \"动作\" }, { \"genre_id\": 25, \"label\": \"冒险\" },\r\n          { \"genre_id\": 29, \"label\": \"多人在线\" }, { \"genre_id\": 28, \"label\": \"模拟\" }, { \"genre_id\": 2, \"label\": \"策略\" },\r\n          { \"genre_id\": 3, \"label\": \"角色扮演\" }, { \"genre_id\": 4, \"label\": \"休闲\" }, { \"genre_id\": 9, \"label\": \"竞速\" }, { \"genre_id\": 18, \"label\": \"体育\" }],\r\n        system: [{ \"os_id\": 1, \"label\": \"Win\" }, { \"os_id\": 2, \"label\": \"Mac\" }, { \"os_id\": 3, \"label\": \"Ubuntu\" }],\r\n        sort: [\"折扣\", \"热门\"]\r\n      },\r\n      formItem: {\r\n        checkbox1: [],\r\n        checkbox2: [],\r\n        radio: \"\"\r\n      },\r\n      shopCarBall: false, // 控制添加购物车动画的红点显示（不是购物车的静态红点，但是两者的位置要重合）  true显示 false隐藏\r\n      shopCarBallEl: null, // 触发添加购物车动画的点击加入购物车按钮\r\n      games: [], // 首页展示游戏数据\r\n      page: 1, // 加载游戏数据页码\r\n      isSpinShow: false, // 是否显示加载更多遮罩动画\r\n      searchKey: \"\" // 搜索关键词\r\n    };\r\n  },\r\n  created() {\r\n    if (this.$route.query.keyword != undefined && this.$route.query.keyword != \"\" && this.$route.query.keyword != null) {\r\n      this.searchKey = this.$route.query.keyword;\r\n      this.slide();\r\n      this.filterGame();\r\n      this.init = 1;\r\n    } else {\r\n      this.getHome();\r\n    }\r\n    // 监听页面下拉底部\r\n    window.addEventListener(\"scroll\", this.scrollBottom);\r\n  },\r\n  destroyed: function() {\r\n    window.removeEventListener(\"scroll\", this.scrollBottom); // 一定要在页面退出前解绑事件 否则会造成多次绑定 页面切换后会多次重复请求\r\n  },\r\n  methods: {\r\n    ...mapActions(\"home\", [\"setSlideshow\"]),\r\n    getHome() {\r\n      getHome({ \"page\": this.page }).then(res => {\r\n        this.swiper = res.data.slide;\r\n        // console.log(this.swiper)\r\n        this.setSlideshow(res.data.slide);\r\n        // this.$store.dispatch(\"home/setSlideshow\", res.data.slide);\r\n        this.games = res.data.games;\r\n        this.init = 1;\r\n        ++this.page;\r\n      });\r\n    },\r\n    // 跳转到详情页\r\n    goDetail(id) {\r\n      this.$router.replace({\r\n        name: \"gameDetail\",\r\n        params: { id: id }\r\n      });\r\n    },\r\n    // 添加进购物车\r\n    addToCart(game_info, e) {\r\n      // console.log(this.$store.state.cart.gameList)\r\n      // console.log(this.$store)\r\n      // console.log(game_info);\r\n      // 传递游戏数据和用来提示的回调函数（message回调无法在vuex中回调使用）\r\n      const payload = { \"game_info\": game_info };\r\n      // 先判断是否已添加\r\n      const _added_cart_games = this.$store.state.cart.gameList;\r\n      const game_exist = _added_cart_games.find(game => game.gid == game_info.gid);\r\n      if (game_exist == undefined) {\r\n        // 显示添加购物车动画\r\n        this.shopCarBallEl = e.currentTarget;\r\n        this.shopCarBall = true;\r\n        // console.log(payload)\r\n        this.$store.dispatch(\"cart/addGame\", payload); // vuex模块开启了namespace 所以actions需要加模块名\r\n        this.$Message.success(\"添加游戏成功\");\r\n      } else {\r\n        this.$Message.warning(\"已添加到购物车中\");\r\n      }\r\n    },\r\n    // 判断是否已加入购物车\r\n    if_add_to_cart(gid) {\r\n      const _added_cart_games = this.$store.state.cart.gameList;\r\n      const game_exist = _added_cart_games.find(game => game.gid == gid);\r\n      if (game_exist == undefined) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    // 监听页面滚动\r\n    scrollBottom() {\r\n      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n      const clientHeight = document.documentElement.clientHeight;\r\n      const scrollHeight = document.documentElement.scrollHeight;\r\n      if (scrollTop > 0 && scrollTop + clientHeight >= scrollHeight) {\r\n        this.getMoreGames();\r\n      }\r\n    },\r\n    // 加载更多游戏数据\r\n    getMoreGames() {\r\n      const params = {\r\n        \"page\": this.page,\r\n        \"genre\": this.formItem.checkbox1,\r\n        \"os\": this.formItem.checkbox2,\r\n        \"radio\": this.formItem.radio,\r\n        \"keyword\": this.searchKey\r\n      };\r\n      this.isSpinShow = true; // 显示遮罩动画\r\n      indexGetMoreGame(params).then(res => {\r\n        this.games.push(...res.data.games);\r\n        ++this.page;\r\n        this.isSpinShow = false;\r\n      });\r\n    },\r\n    // 筛选游戏\r\n    filterGame() {\r\n      this.page = 1;\r\n      const params = {\r\n        \"page\": this.page,\r\n        \"genre\": this.formItem.checkbox1,\r\n        \"os\": this.formItem.checkbox2,\r\n        \"radio\": this.formItem.radio,\r\n        \"keyword\": this.searchKey\r\n      };\r\n      indexGetMoreGame(params).then(res => {\r\n        this.games = res.data.games;\r\n        ++this.page;\r\n      });\r\n    },\r\n    // 单独请求幻灯片数据\r\n    slide() {\r\n      getSlideData({}).then(res => {\r\n        this.swiper = res.data.slide;\r\n      });\r\n    },\r\n    // 图片加载完成后替换图片占位符\r\n    loadImg(item,e) {\r\n      if(e.target.src.indexOf(\"http\") === -1){\r\n        //console.log(e.target)\r\n        item.target = e.target\r\n      \r\n        const image = new Image();\r\n        image.src = item.image;\r\n        image.onload = function() { // 这里不可再写参数 否则就是e指向的对象就是 new出来的这个 image了\r\n          image.onload = null\r\n          item.target.src = item.image;\r\n\r\n          // if (Array.isArray(e.path)) {\r\n          //   // edge\r\n          //   e.path[0].src = item.image;\r\n          // } else {\r\n          //   // firefox chrome 没有 e.path 只有 e.target\r\n          //   e.target.src = item.image;\r\n          // }\r\n          \r\n        };\r\n      }\r\n      \r\n    },\r\n    // 动画开始\r\n    beforeEnter(el) {\r\n      // console.log(el) //shop_car_ball\r\n      const dom = this.shopCarBallEl.getBoundingClientRect(); // 获取点击按钮的位置   // 获取元素的大小及其相对于视口的位置\r\n      const offsetX = window.innerWidth - dom.left - 130;\r\n      const offsetY = dom.top - 50;\r\n\r\n      const elOffsetY = (window.innerHeight - 130) / 2; // 购物车红点的位置\r\n      const newOffsetY = offsetY - elOffsetY; // 重新计算Y轴偏移量\r\n      // console.log(window.innerHeight)\r\n      // console.log(offsetY)\r\n      // console.log(elOffsetY)\r\n      // console.log(newOffsetY)\r\n\r\n      el.style.display = \"\";\r\n      el.style.transform = `translate3d(0, ${newOffsetY}px, 0)`; // y轴是曲直向上的，x轴是蜿蜒的向右的\r\n      const linnerBall = el.querySelector(\".linner_ball\");\r\n      linnerBall.style.transform = `translate3d(-${offsetX}px, 0, 0)`;\r\n    },\r\n    // 触发重绘，来实现动画的移动过程\r\n    enter(el, done) {\r\n      this.ss = document.body.offsetHeight;\r\n      el.style.transform = `translate3d(0, 0, 0)`;\r\n      const linnerBall = el.querySelector(\".linner_ball\");\r\n      linnerBall.style.transform = `translate3d(0, 0, 0)`;\r\n      el.addEventListener(\"transitionend\", done);\r\n    },\r\n    afterEnter(el) {\r\n      this.shopCarBall = false;\r\n      el.style.display = \"none\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n  .home {\r\n    .check {\r\n      max-width: @main-width;\r\n      margin: 0 auto;\r\n      background-color: rgba(255, 255, 255, 0.02);\r\n      color: #fafafa;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .ivu-form-item {\r\n        display: flex;\r\n        align-items: center;\r\n        height: 45px;\r\n        margin-bottom: 0;\r\n        &:last-child {\r\n          border: 0;\r\n        }\r\n        /deep/.ivu-form-item-label {\r\n          text-align: left;\r\n          font-size: 14px;\r\n          padding-right: 20px;\r\n          color:#FF7400;\r\n          font-weight: 500;\r\n        }\r\n        /deep/.ivu-form-item-content {\r\n          margin-left: 0 !important;\r\n        }\r\n      }\r\n    }\r\n    .goods {\r\n      max-width: @main-width;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      // justify-content: space-between;\r\n      .goods-item {\r\n        word-wrap: break-word;\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: calc((100% - 19px * 3) / 4);\r\n        margin-bottom: 20px;\r\n        margin-right: 19px;\r\n        .item-img {\r\n          position: relative;\r\n          //height: 160px;\r\n          height: 217px;\r\n          img {\r\n            width: 100%;\r\n            height: 100%;\r\n          }\r\n          img:nth-child(1){\r\n            //height: 215px;\r\n          }\r\n          .icon {\r\n            position: absolute;\r\n            right: 10px;\r\n            top: 10px;\r\n            width: 24px;\r\n            height: 24px;\r\n          }\r\n          .goods-item-title {\r\n            position: absolute;\r\n            width: 100%;\r\n            padding: 0 30px 0 10px;\r\n            bottom: 0;\r\n            color: #e0e0e0;\r\n            font-size: 14px;\r\n            background-color: rgba(0, 0, 0, 0.6);\r\n          }\r\n        }\r\n        .goods-price {\r\n          display: flex;\r\n          height: 80px;\r\n          .goods-name {\r\n            width: 80%;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            background-color: rgba(40,41,49);\r\n            padding: 5px 0;\r\n            .goods-title {\r\n              width: 64% ;\r\n              display: flex;\r\n              flex-direction: column;\r\n              justify-content: space-between;\r\n              font-size: 16px;\r\n              color: #fff;\r\n              //font-weight: bold;\r\n              padding-left: 15px;\r\n              .game_cname {\r\n                width: 100%;\r\n              }\r\n              .game_ename{\r\n                font-size: 13px;\r\n                color:gray;\r\n              }\r\n              .goodType {\r\n                font-size: 14px;\r\n                font-weight: 500;\r\n                color: @warn;\r\n                .activtiy .svg-icon {\r\n                  vertical-align: -0.25em;\r\n                }\r\n              }\r\n            }\r\n            .price {\r\n              display: flex;\r\n              width: 36%;\r\n              height: 100%;\r\n              flex-direction: column;\r\n              padding-right: 10px;\r\n              text-align: right;\r\n              span {\r\n                overflow: hidden;\r\n                white-space: nowrap;\r\n                font-size: 24px;\r\n                color:#0abf53;\r\n              }\r\n              .old-price {\r\n                text-align: right;\r\n                text-decoration:line-through;\r\n                font-size: 18px;\r\n                color: #808081;\r\n              }\r\n            }\r\n          }\r\n          .car-btn {\r\n            // flex: 1;\r\n            display: inline-block;\r\n            box-sizing: border-box;\r\n            width: 20%;\r\n            height: 100%;\r\n            background-color: #FF7400;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            cursor: pointer;\r\n          }\r\n          .added_to_cart{\r\n            background-color: #999;\r\n          }\r\n        }\r\n      }\r\n      .goods-item:after {\r\n        content: \"\";\r\n        flex: auto;\r\n      }\r\n    }\r\n  }\r\n\r\n  //加入购物车的动画红点 与 购物车本身的红点位置重合\r\n  //根据所点击的控件与购物车的距离动态调整 transition秒数\r\n  .shop_car_ball {\r\n    position: fixed;\r\n    top: 50% - 5px;\r\n    right: 12px;\r\n    z-index: 10;\r\n    font-size: 16px;\r\n    // transition: all .25s cubic-bezier(0.49, -0.29, 0.75, 90.41);\r\n    /* 贝塞尔曲线 */\r\n    transition: all 1.5s cubic-bezier(.17, .86, .73, .14);\r\n    .linner_ball {\r\n        transition: all 1.5s linear;\r\n        width: 18px;\r\n        height: 18px;\r\n        background-color: red;\r\n        border-radius: 50%;\r\n    }\r\n  }\r\n\r\n  .demo-spin-col{\r\n      height: 100px;\r\n      position: relative;\r\n      border: 1px solid #eee;\r\n  }\r\n  .demo-spin-icon-load{\r\n      animation: ani-demo-spin 1s linear infinite;\r\n  }\r\n  @keyframes ani-demo-spin {\r\n    from { transform: rotate(0deg);}\r\n    50% { transform: rotate(180deg);}\r\n    to { transform: rotate(360deg);}\r\n  }\r\n  .ivu-spin{\r\n    color:#FF7400\r\n  }\r\n  .ivu-spin-fix {\r\n    position: fixed;\r\n    background-color:transparent;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5a01a360&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5a01a360&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a01a360\",\n  null\n  \n)\n\nexport default component.exports","import request from \"@/utils/request\";\r\n\r\nexport function getHome(params) {\r\n  return request({\r\n    url: \"/index/index\",\r\n    method: \"post\",\r\n    params\r\n  });\r\n}\r\n\r\n//首页获取更多游戏数据\r\nexport function indexGetMoreGame(params){\r\n  return request({\r\n    url: \"/index/moreGames\",\r\n    method: \"post\",\r\n    params\r\n  });\r\n}\r\n\r\n//首页获取幻灯片数据\r\nexport function getSlideData(params){\r\n  return request({\r\n    url: \"/index/slide\",\r\n    method: \"post\",\r\n    params\r\n  });\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","swiper","init","formItem","model","value","checkbox1","callback","$$v","$set","expression","_l","filtrate","gameType","item","index","key","genre_id","nativeOn","$event","filterGame","_v","_s","label","checkbox2","system","os_id","_e","games","style","on","goDetail","gid","require","loadImg","genres","game_cname","game_ename","good_type","district","_f","price_final","price_initial","cdkey_store","arrivalNotify","vid","district_id","class","added_to_cart","if_add_to_cart","stopPropagation","addToCart","staticStyle","beforeEnter","enter","afterEnter","directives","name","rawName","shopCarBall","isSpinShow","staticRenderFns","data","sort","radio","shopCarBallEl","page","searchKey","created","window","destroyed","methods","getHome","params","id","scrollBottom","getMoreGames","indexGetMoreGame","slide","getSlideData","image","el","linnerBall","component","request","url","method"],"sourceRoot":""}